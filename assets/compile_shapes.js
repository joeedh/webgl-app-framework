#!/usr/bin/env nodejs

let fs = require('fs');
let btoa = require('btoa');

let files = {
  ARROW : "arrow.obj",
  PLANE : "plane.obj",
  TORUS : "rotatetorus.obj",
  BLOCKARROW : "scalearrow.obj",
  CHEVRON : "chevron.obj",
  SPHERE  : "sphere.obj",
  LIGHT   : "light.obj",
  CURSOR  : "cursor.obj"
};

let data = '';

for (let k in files) {
  let path = files[k];

  let buf = fs.readFileSync(path, "ascii");
  buf = btoa(buf);

  data += `  ${k} : "${buf}",\n`;
}

let out = `
/**WARNING: autogenerated file*/

import {readOBJ} from '../../util/objloader.js';

export let WidgetOBJs = {
${data}};

/**loadWidgetShapes will put widget meshes here, with the same keys as in
   WidgetOBJs*/
export let WidgetShapes = {
};

window._WidgetShapes = WidgetShapes; //for debug console access
window._WidgetOBJs = WidgetOBJs; //for debug console access

export function loadWidgetShapes() {
  for (let k in WidgetOBJs) {
    let buf = WidgetOBJs[k];
    buf = atob(buf);

    WidgetShapes[k] = readOBJ(buf);
  }
}

loadWidgetShapes();
`


fs.writeFileSync("../scripts/editors/view3d/widget_shapes.js", out);